{% extends "forum/base.html" %}

{% block content %}
  <h1>{{ post.title }}</h1>
  <h6>
    {{ post.author }}
    <p>{{ post.content|linebreaks }}</p>
  </h6>

  {% with comments.count as total_comments %}
  <h2>
    {{ total_comments }} comment{{ total_comments|pluralize }}
  </h2>
  {% endwith %}

  {% for comment in comments %}
    <div class="comment">
      <p class="info">
        by {{ comment.name }}
        {{ comment.created }}
      </p>
      {{ comment.body|linebreaks }}
    </div>
    {% empty %}
      <p>There are no comments yet.</p>
    {% endfor %}
  
  <div class="sharing-buttons flex flex-wrap">
    <a class="border-2 duration-200 ease inline-flex items-center mb-1 mr-1 transition p-3 rounded-lg text-white border-blue-600 bg-blue-600 hover:bg-blue-700 hover:border-blue-700" target="_blank" rel="noopener" href="{% url "forum:share_post" post.id %}" aria-label="Share by Email" draggable="false">
      <svg aria-hidden="true" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="w-6 h-6">
        <title>Email</title>
        <path d="M464 64a48 48 0 0 1 29 86L275 314c-11 8-27 8-38 0L19 150a48 48 0 0 1 29-86h416zM218 339c22 17 54 17 76 0l218-163v208c0 35-29 64-64 64H64c-35 0-64-29-64-64V176l218 163z">
        </path>
      </svg>
    </a>
  </div>
    
  <h2 class="text-2xl font-bold mb-4 text-white">Comment this post</h2>
  <div class="flex justify-start">
    <form class="max-w-sm w-full" method="post" action="{% url "forum:post_comment" post.id %}">
      {% csrf_token %}
      <label for="id_name" class="block mb-1 text-sm font-medium text-gray-300">Name</label>
      {{ form.name }}

      <label for="id_body" class="block mb-2 text-sm font-medium text-gray-300 mt-4">Comment</label>
      {{ form.body }}

      <button type="submit" class="custom-button mt-3 px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-white text-sm font-medium rounded-lg border-2 border-gray-600 hover:border-gray-500 transition-all duration-200 hover:scale-105 active:scale-95 hover:shadow-lg hover:shadow-gray-500/50 focus:ring-4 focus:ring-gray-500/50 focus:outline-none mb-4">Submit</button>

    </form>
  </div>
{% endblock content %}